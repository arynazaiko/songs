(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(65)},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),c=n.n(o),i=n(6),l=n(11),s=n(66),u=n(30),p=n(31),m=n.n(p),f=(n(43),n(7)),h=n(8),d=n(12),E=n(9),S=n(13),b=n(67),g=n(10),O=n(14),y=n.n(O),C=function(e){return{type:"POST_SONG_SUCCESS",payload:e}},_=function(e){return{type:"POST_SONG_ERROR",payload:e}},v=function(e){return{type:"FETCH_SONGS_SUCCESS",payload:e}},N=function(e){return{type:"FETCH_SONGS_ERROR",payload:e}},j=function(e){return{type:"DELETE_SONG_SUCCESS",payload:e}},k=function(e){return{type:"DELETE_SONG_ERROR",payload:e}},R=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(d.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).state={},n.formRef=r.a.createRef(),n.fileRef=r.a.createRef(),n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(g.a)({},a,r))},n.handleSubmit=function(e){if(e.preventDefault(),n.formIsValid()){var t=n.state,a=t.title,r=t.author,o=t.time,c=n.fileRef.current.files[0],i={title:a,author:r,time:o};n.props.postSong(i,c),n.formRef.current.reset()}},n.formIsValid=function(){var e=n.state,t=e.title,a=e.author,r=e.time,o=n.fileRef.current.files[0];return a&&t&&r&&o},n.handleClick=function(e){n.props.fetchSongs()},n.handleDelete=function(e){n.props.deleteSong(e)},n}return Object(S.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.songs;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"form-inline mb-3",onSubmit:this.handleSubmit,ref:this.formRef},r.a.createElement("input",{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"title",className:"form-control mr-2",onChange:this.handleChange}),r.a.createElement("input",{placeholder:"\u0410\u0432\u0442\u043e\u0440",name:"author",className:"form-control mr-2",onChange:this.handleChange}),r.a.createElement("input",{placeholder:"\u0414\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",name:"time",className:"form-control mr-2",onChange:this.handleChange}),r.a.createElement("input",{type:"file",ref:this.fileRef}),r.a.createElement("button",{className:"btn btn-success"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")),r.a.createElement("button",{onClick:this.handleClick,className:"btn btn-primary mb-3"},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u0435\u0441\u043d\u0438"),r.a.createElement("ul",{className:"list-group"},t.map(function(t){return r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center",key:t.id},t.title," ",t.author,r.a.createElement("audio",{controls:!0},r.a.createElement("source",{src:"https://infinite-brook-78423.herokuapp.com/".concat(t.path),type:"audio/mpeg"})),r.a.createElement("span",{className:"badge badge-primary badge-pill"},t.time),r.a.createElement("button",{onClick:function(n){return e.handleDelete(t.id)},className:"btn btn-danger mb-3"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0441\u043d\u044e"))})))}}]),t}(a.Component),w=Object(l.b)(function(e){return{songs:e.songs}},{fetchSongs:function(){return function(e){y.a.get("https://infinite-brook-78423.herokuapp.com/api/songs").then(function(t){var n=t.data;return e(v(n))}).catch(function(t){return e(N(t))})}},postSong:function(e,t){return function(n){var a=new FormData;a.append("title",e.title),a.append("author",e.author),a.append("time",e.time),a.append("file",t,t.name),y.a.post("https://infinite-brook-78423.herokuapp.com/api/songs",a).then(function(e){var t=e.data;return n(C(t))}).catch(function(e){return n(_(e))})}},deleteSong:function(e){return function(t){y.a.delete("https://infinite-brook-78423.herokuapp.com/api/songs/".concat(e)).then(function(){return t(j(e))}).catch(function(e){return t(k(e))})}}})(R),T=function(e){function t(){return Object(f.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container py-5"},r.a.createElement(b.a,{exact:!0,path:"/songs/",component:w}))}}]),t}(a.Component),D=n(21),G=n(15),U={songs:[],users:[]};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(64);var F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,I=Object(i.d)(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"FETCH_SONGS_SUCCESS":return Object(G.a)({},t,{songs:n.payload});case"POST_SONG_SUCCESS":return e=[].concat(Object(D.a)(t.songs),[n.payload]),Object(G.a)({},t,{songs:e});case"DELETE_SONG_SUCCESS":var a=(e=Object(D.a)(t.songs)).findIndex(function(e){return n.payload.id===e.id});return e.splice(a,1),Object(G.a)({},t,{songs:e});default:return t}},F(Object(i.a)(u.a,m.a)));c.a.render(r.a.createElement(l.a,{store:I},r.a.createElement(s.a,null,r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,1,2]]]);
//# sourceMappingURL=main.24ee2d8b.chunk.js.map